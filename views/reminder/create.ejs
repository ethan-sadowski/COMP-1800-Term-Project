<div class="container">
  <br>
  <form action="/reminder" method="POST">
    <div class="form-group">
      <label for="title">Title</label>
      <input type="text" class="form-control" id="titleInput" placeholder="Title" name="title">
      <div class="form-group">
        <label for="date">Reminder Date:</label>

    <img id='umbrella' class="btn btn-default" src='https://i.imgur.com/26ijETQ.png' alt='need umbrella?' width='70'/>  
    
        <br>
        <input type="date" id="dateInput" rows="1" placeholder="Date" name="date"></input>
      </div>
    </div>
    <div class="form-group">
      <label for="description">Description</label>
      <textarea class="form-control" id="descriptionInput" rows="3" placeholder="Description" name="description"></textarea>
    </div>
    <div class="form-group">
      <label for="subtasks">Subtasks:</label>
      <br>
      <input type="text" id="subtaskInput" rows="1" placeholder="Subtask" name="subtask1"></input>
      <input type="text" id="subtaskInput" rows="1" placeholder="Subtask" name="subtask2"></input>
      <input type="text" id="subtaskInput" rows="1" placeholder="Subtask" name="subtask3"></input>
      <input type="text" id="subtaskInput" rows="1" placeholder="Subtask" name="subtask4"></input>
    </div>
    <button type="submit" class="btn btn-default">Submit</button>
  </form>
  
  <form action="/weather" method="POST">
  
  </form>  
  
  <!-- <% if(data && data.daily && data.daily.icon == 'rain'){ %>
    <script>
      document.getElementById('umbrella').src = 'https://i.imgur.com/3SdDbN3.png'
    </script>
  <% } else{ %>
    <script>
      document.getElementById('umbrella').src = 'https://i.imgur.com/26ijETQ.png'
    </script>
  <% } %> -->

  <script>    
  
  //get user's geo location, pass object to showLocation()
    function getLocation() {
        if (navigator.geolocation) {
          navigator.geolocation.getCurrentPosition(locationDate);
        } else {
          x.innerHTML = "Geolocation is not supported by this browser.";
        }
      }

    function locationDate(position) {        
      //get location data
      //get x, y axis from location object
      let latitude = position.coords.latitude;
      let longtitude = position.coords.longitude;
      console.log("Latitude: " + latitude);
      console.log("Longtitude: " + longtitude);
        
      //get time from userInput_date
      let date = document.getElementById('dateInput').value;
      //alert user if no date is selected, else send data to getWeather()
      if (date.length == 0){alert('Please select a date first')}
      else{
            //convert to UNIX time
            date = new Date(date).getTime() / 1000;
            //check on the front end and see if date in UNIX format
            console.log(date);
            //use axios to prevent the page to be redirected and send location and date data to backend.
            axios.get('/weather?date=' + date + '&latitude=' + latitude + '&longtitude=' + longtitude)
              .then(function (response) {
                console.log(response);    
                if (response.data.raining){
                  document.getElementById('umbrella').src='https://i.imgur.com/3SdDbN3.png'
                }
                else{
                  document.getElementById('umbrella').src='https://i.imgur.com/26ijETQ.png'
                }
              })        
              // document.getElementById('umbrella').disabled = true; 
            }      


    }

    function clickUmbrella(){
      getLocation();
    }
    document.getElementById('umbrella').onclick = clickUmbrella; 
  </script>
  
<script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.min.js"></script>
</div>